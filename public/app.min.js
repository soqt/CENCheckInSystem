!function(){"use strict";function e(e,n){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginController",controllerAs:"vm"}).when("/app",{templateUrl:"/app/app.view.html",controller:"appController",controllerAs:"vm"}).when("/officers",{templateUrl:"/officers/officers.view.html",controller:"officersController",controllerAs:"vm"}).when("/officers/analysis",{templateUrl:"/officers/analysis.view.html",controller:"officersController",controllerAs:"vm"}).when("/events",{templateUrl:"/events/events.view.html",controller:"eventsController",controllerAs:"vm"}).when("/events/:event_id",{templateUrl:"/events/event.view.html",controller:"eventController",controllerAs:"vm"}).otherwise({redirectTo:"/"}),n.html5Mode(!0)}function n(e,n,t){e.$on("$routeChangeStart",function(e,o,r){"/app"!==n.path()||t.isLoggedIn()||n.path("/")})}angular.module("cenApp",["ngRoute","ngResource"]).config(e).run(n),e.$inject=["$routeProvider","$locationProvider"],n.$inject=["$rootScope","$location","Authentication"]}(),function(){function e(e,n){var t=this;t.toOfficers=function(){e.path("officers")},t.toEvents=function(){e.path("events")}}angular.module("cenApp").controller("appController",e),e.$inject=["$location","Authentication"]}(),function(){function e(){console.log("Home controller is running")}angular.module("cenApp").controller("homeCtrl",e)}(),function(){function e(e,n,t,o,r){var c=this,i=o.event_id;c.event=t.get({event_id:i}),c.checkin=function(e){r.checkin(i,e).then(function(e){c.event=t.get({event_id:i})},function(e){console.log(e)})},c.uncheckin=function(e){r.uncheckin(i,e).then(function(e){c.event=t.get({event_id:i})},function(e){console.log(e)})},c.vacate=function(e){r.vacate(i,e).then(function(e){c.event=t.get({event_id:i})},function(e){console.log(e)})},c.unvacate=function(e){r.unvacate(i,e).then(function(e){c.event=t.get({event_id:i})},function(e){console.log(e)})}}angular.module("cenApp").controller("eventController",e),e.$inject=["$scope","$location","EventsService","$routeParams","EventOperation"]}(),function(){function e(e,n,t){var o=this;o.events=t.query(),o.toCheckIn=function(e){n.path("events/"+e)},o.deleteEvent=function(e){t.delete({event_id:e._id},function(){o.events=t.query()})},o.newEvent={name:"",start_time:""},o.addEvent=function(){t.save(o.newEvent,function(e){e.name?(console.log(e),o.events=t.query()):alert("Event already existed")})}}angular.module("cenApp").controller("eventsController",e),e.$inject=["$scope","$location","EventsService"]}(),function(){function e(e,n){var t=this;t.isLoggedIn=n.isLoggedIn(),t.currentUser=n.currentUser(),t.logout=n.logout()}angular.module("cenApp").controller("navigationCtrl",e),e.$inject=["$location","Authentication"]}(),function(){function e(e,n,t){var o=this;o.officers=t.query(),o.newOfficer={name:""},o.addOfficer=function(){t.save(o.newOfficer,function(e){e.name?(console.log(e),o.officers.push(e)):alert("Officer already existed")})}}angular.module("cenApp").controller("officersController",e),e.$inject=["$scope","$location","OfficerService"]}(),function(){function e(e,n){var t=this;t.credentials={username:"",password:""},t.errorMessage="",t.login=function(){t.errorMessage="",n.login(t.credentials).then(function(n){e.path("app")},function(e){t.errorMessage=e.data.message})}}angular.module("cenApp").controller("loginController",e),e.$inject=["$location","Authentication"]}(),function(){function e(e,n){var t=function(n){return e.post("/auth/login",n).then(function(e){console.log(e),console.log(e.data.token),o(e.data.token)})},o=function(e){n.localStorage["access-token"]=e},r=function(){return n.localStorage["access-token"]},c=function(){n.localStorage.removeItem("access-token")},i=function(){var e,t=r();return!!t&&(e=t.split(".")[1],e=n.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},l=function(){if(i()){var e=r(),t=e.split(".")[1];return t=n.atob(t),t=JSON.parse(t),{username:t.username,name:t.name}}};return{login:t,saveToken:o,getToken:r,logout:c,isLoggedIn:i,currentUser:l}}angular.module("cenApp").service("Authentication",e),e.$inject=["$http","$window"]}(),function(){function e(e,n){var t=function(n,t){return e.put("/api/events/"+n+"/checkin/"+t)},o=function(n,t){return e.put("/api/events/"+n+"/uncheckin/"+t)},r=function(n,t){return e.put("/api/events/"+n+"/vacate/"+t)},c=function(n,t){return e.put("/api/events/"+n+"/unvacate/"+t)},i=function(n,t){return e.put("/api/events/"+n+"/rm/"+t)};return{checkin:t,uncheckin:o,vacate:r,unvacate:c,remove:i}}angular.module("cenApp").service("EventOperation",e),e.$inject=["$http","$window"]}(),function(){function e(e){return e("api/events/:event_id")}angular.module("cenApp").factory("EventsService",e),e.$inject=["$resource"]}(),function(){function e(e){return e("api/officers/:id")}angular.module("cenApp").factory("OfficerService",e),e.$inject=["$resource"]}();
//# sourceMappingURL=app.min.js.map
