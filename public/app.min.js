!function(){"use strict";function e(e,n,t){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginController",controllerAs:"vm"}).when("/app",{templateUrl:"/app/app.view.html",controller:"appController",controllerAs:"vm"}).when("/officers",{templateUrl:"/officers/officers.view.html",controller:"officersController",controllerAs:"vm"}).when("/officers/edit/:officer_id",{templateUrl:"/officers/edit.view.html",controller:"officersUpdateController",controllerAs:"vm"}).when("/officers/analysis",{templateUrl:"/officers/analysis.view.html",controller:"officersController",controllerAs:"vm"}).when("/events",{templateUrl:"/events/events.view.html",controller:"eventsController",controllerAs:"vm"}).when("/events/:event_id",{templateUrl:"/events/event.view.html",controller:"eventController",controllerAs:"vm"}).otherwise({redirectTo:"/"}),n.html5Mode(!0),t.asyncLoading(!1).scriptUrl("//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js")}function n(e,n,t){e.$on("$routeChangeStart",function(e,o,r){"/app"!==n.path()||t.isLoggedIn()||n.path("/")})}angular.module("cenApp",["ngRoute","ngResource","angular-momentjs"]).config(e).run(n),e.$inject=["$routeProvider","$locationProvider","$momentProvider"],n.$inject=["$rootScope","$location","Authentication"]}(),function(){function e(e,n){var t=this;t.toOfficers=function(){e.path("officers")},t.toEvents=function(){e.path("events")}}angular.module("cenApp").controller("appController",e),e.$inject=["$location","Authentication"]}(),function(){function e(e,n,t,o,r){var c=this,i=o.event_id;c.event=t.get({event_id:i}),c.checkin=function(e){r.checkin(i,e).then(function(e){c.event=t.get({event_id:i})},function(e){console.log(e)})},c.uncheckin=function(e){r.uncheckin(i,e).then(function(e){c.event=t.get({event_id:i})},function(e){console.log(e)})},c.vacate=function(e){r.vacate(i,e).then(function(e){c.event=t.get({event_id:i})},function(e){console.log(e)})},c.unvacate=function(e){r.unvacate(i,e).then(function(e){c.event=t.get({event_id:i})},function(e){console.log(e)})}}angular.module("cenApp").controller("eventController",e),e.$inject=["$scope","$location","EventsService","$routeParams","EventOperation"]}(),function(){function e(e,n,t,o){function r(){var e=t.query(function(e){for(var n=0,t=e.length;n<t;n++){var r=e[n];r.start_time=o(r.start_time)}});return e}var c=this;c.events=r(),c.toCheckIn=function(e){n.path("events/"+e)},c.deleteEvent=function(e){t.delete({event_id:e._id},function(){c.events=r()})},c.newEvent={name:"",start_time:""},c.addEvent=function(){t.save(c.newEvent,function(e){e.name?(console.log(e),c.events=r()):alert("Event already existed")})}}angular.module("cenApp").controller("eventsController",e),e.$inject=["$scope","$location","EventsService","$moment"]}(),function(){function e(){console.log("Home controller is running")}angular.module("cenApp").controller("homeCtrl",e)}(),function(){function e(e,n,t,o){var r=this;r.errorMessage="";var c=n.officer_id;r.currentOfficer=t.get({id:c});var i="/api/officers/"+c;r.update=function(){r.errorMessage="",o.put(i,r.currentOfficer).then(function(n){e.path("officers"),console.log(n)},function(e){r.errorMessage=e.data,console.log(e)})},r.delete=function(){t.delete({id:c},function(n){console.log(n),n.active||e.path("officers")})}}angular.module("cenApp").controller("officersUpdateController",e),e.$inject=["$location","$routeParams","OfficerService","$http"]}(),function(){function e(e,n,t,o){var r=this;r.officers=t.query(function(e){for(var n=0,t=e.length;n<t;n++){var r=e[n],c=r.total_late_time;console.log(c);var i=o.duration(c);console.log(i);var l=Math.floor(i.asHours())+o.utc(c).format(":mm:ss");console.log(l),r.total_late_time=l,console.log("db1 ",r.total_late_time)}}),r.newOfficer={name:""},r.addOfficer=function(){t.save(r.newOfficer,function(e){e.name?(console.log(e),r.officers.push(e)):alert("Officer already existed")})},r.editOfficer=function(e){n.path("officers/edit/"+e._id)}}angular.module("cenApp").controller("officersController",e),e.$inject=["$scope","$location","OfficerService","$moment"]}(),function(){function e(e,n){var t=this;t.credentials={username:"",password:""},t.errorMessage="",t.login=function(){t.errorMessage="",n.login(t.credentials).then(function(n){e.path("app")},function(e){t.errorMessage=e.data.message})}}angular.module("cenApp").controller("loginController",e),e.$inject=["$location","Authentication"]}(),function(){function e(e,n){var t=function(n){return e.post("/auth/login",n).then(function(e){console.log(e),console.log(e.data.token),o(e.data.token)})},o=function(e){n.localStorage["access-token"]=e},r=function(){return n.localStorage["access-token"]},c=function(){n.localStorage.removeItem("access-token")},i=function(){var e,t=r();return!!t&&(e=t.split(".")[1],e=n.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},l=function(){if(i()){var e=r(),t=e.split(".")[1];return t=n.atob(t),t=JSON.parse(t),{username:t.username,name:t.name}}};return{login:t,saveToken:o,getToken:r,logout:c,isLoggedIn:i,currentUser:l}}angular.module("cenApp").service("Authentication",e),e.$inject=["$http","$window"]}(),function(){function e(e,n){var t=function(n,t){return e.put("/api/events/"+n+"/checkin/"+t)},o=function(n,t){return e.put("/api/events/"+n+"/uncheckin/"+t)},r=function(n,t){return e.put("/api/events/"+n+"/vacate/"+t)},c=function(n,t){return e.put("/api/events/"+n+"/unvacate/"+t)},i=function(n,t){return e.put("/api/events/"+n+"/rm/"+t)};return{checkin:t,uncheckin:o,vacate:r,unvacate:c,remove:i}}angular.module("cenApp").service("EventOperation",e),e.$inject=["$http","$window"]}(),function(){function e(e){return e("api/events/:event_id")}angular.module("cenApp").factory("EventsService",e),e.$inject=["$resource"]}(),function(){function e(e){return e("api/officers/:id")}angular.module("cenApp").factory("OfficerService",e),e.$inject=["$resource"]}(),function(){function e(e,n,t){e.isLoggedIn=t.isLoggedIn(),e.currentUser=t.currentUser(),e.logout=function(){e.isLoggedIn=!1,e.currentUser="",t.logout()}}angular.module("cenApp").controller("navbarController",e),e.$inject=["$scope","$location","Authentication"]}(),function(){angular.module("cenApp").directive("navbarDirective",function(){return{templateUrl:"./javascripts/directives/navbar/navbar.template.html",controller:"navbarController"}})}();
//# sourceMappingURL=app.min.js.map
